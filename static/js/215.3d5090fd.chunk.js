"use strict";(self.webpackChunkmessenger_app=self.webpackChunkmessenger_app||[]).push([[215],{1492:(n,e,t)=>{t.d(e,{A:()=>l});var o,r=t(7528),a=t(197),i=t(3255);const s=a.Ay.div(o||(o=(0,r.A)(["\n  padding: 0 72px;\n  margin: 0 auto;\n  min-width: ",";\n  max-width: ",";\n\n  @media screen and (min-width: ",") {\n    padding: 0 88px;\n    min-width: 768px;\n  }\n  @media screen and (min-width: ",") {\n    padding: 0 81px;\n    max-width: 1440px;\n  }\n"])),i.f.breakpoints.mobileMin,i.f.breakpoints.mobileMax,i.f.breakpoints.tablet,i.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},8774:(n,e,t)=>{t.d(e,{A:()=>l});var o,r=t(7528),a=t(197),i=t(3255);const s=a.Ay.section(o||(o=(0,r.A)(["\n  padding: 30px 0;\n\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n"])),i.f.breakpoints.tablet,i.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},3215:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Hn});var o,r,a=t(5043),i=t(6032),s=t(8147),d=t(764),l=t(1088),c=t(3712),m=t(8774),u=t(1492),p=t(3013),x=t(4583),g=t(7528),h=t(197);const f=h.Ay.form(o||(o=(0,g.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  justify-content: center;\n  width: ",";\n"])),(n=>n.$formSize)),y=h.Ay.input(r||(r=(0,g.A)(["\n  height: auto;\n  padding: 15px;\n  border-radius: 12px;\n  border: none;\n  width: 100%;\n"])));var b=t(579);const A=n=>{let{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:r,btnName:a,btnDisabled:i,formSize:s}=n;return(0,b.jsxs)(f,{onSubmit:e,$formSize:s,children:[(0,b.jsx)(y,{value:t,onChange:o,placeholder:r}),(0,b.jsx)(x.A,{name:a,type:"submit",disabled:i})]})};var v=t(9637);const j=n=>{let{options:e,selectedRoom:t,onSelectRoom:o}=n;return(0,b.jsx)(v.Ay,{options:e,value:t,onChange:o,styles:{control:n=>({...n,height:"auto",padding:"7px 15px",borderRadius:"12px",border:"none",width:"291px"}),valueContainer:n=>({...n,padding:"0",margin:"0"}),indicatorsContainer:n=>({...n,padding:"0",margin:"0"}),input:n=>({...n,padding:"0",margin:"0"})}})};var w,S,k=t(3255);const R=h.Ay.div(w||(w=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  gap: 30px;\n\n  // padding: 48px;\n  height: 80vh;\n  // background-color: ",";\n  background-color: inherit;\n  border-radius: 12px;\n"])),k.f.background.bgTertiary),C=h.Ay.p(S||(S=(0,g.A)(["\n  color: ",";\n\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 1.62em;\n  text-transform: uppercase;\n"])),k.f.colors.secondaryText),E=n=>{let{setRoom:e,user:t}=n;const[o,r]=(0,a.useState)(""),[s,d]=(0,a.useState)(""),[m,u]=(0,a.useState)("");(0,a.useEffect)((()=>{const n=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i.My)("timestamp"));return(0,i.aQ)(n,(n=>{d(n.docs.filter((n=>n.data().uid===t.uid)).map(((n,e)=>({value:n.data().room,label:"Room ".concat(e+1)}))))}))}),[t]);const g=async n=>{try{const e=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i._M)("room","==",n));return!(await(0,i.GG)(e)).empty}catch(e){return console.error("Error checking room existence:",e),!1}};return(0,b.jsxs)(R,{children:[(0,b.jsx)(C,{children:"Do you want create new room ?"}),(0,b.jsx)(x.A,{func:()=>{const n=(0,c.Ak)();e(n),localStorage.setItem("room",n),p.Notify.success("Room has been created!")},name:"Create room",type:"button",size:"291px"}),(0,b.jsx)(C,{children:"---------- or ---------"}),(0,b.jsx)(C,{children:"You already have privet rooms?"}),(0,b.jsx)(j,{options:s,selectedRoom:m,onSelectRoom:n=>{u(n.value),localStorage.setItem("room",n.value),e(n.value),p.Notify.success("Welcome back!")}}),(0,b.jsx)(C,{children:"---------- or ---------"}),(0,b.jsx)(C,{children:"You already have invitation?"}),(0,b.jsx)(A,{onSubmit:async n=>{n.preventDefault();await g(o)?(localStorage.setItem("room",o),e(o),p.Notify.success("Welcome aboard!")):p.Notify.failure("Room does not exist. Please enter a valid room number.")},inputValue:o,onFormChange:n=>r(n.target.value),formPlaceholder:"Insert your invitation here...",btnName:"Join",formSize:"291px"})]})};var M=t(3528);const N=n=>{if(!n)return"";const e=n.toDate();return new Intl.DateTimeFormat("uk-UK",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)};var z,I,D,P,F,T,L,V,$,_;const J=h.Ay.div(z||(z=(0,g.A)(["\n  display: flex;\n  // flex-direction: column;\n  // gap: 10px;\n  // max-width: calc(100% / 1.5);\n  // width: fit-content;\n\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),G=h.Ay.div(I||(I=(0,g.A)(["\n  display: flex;\n  flex-direction: column;\n  // max-width: calc(100% / 2);\n  gap: 10px;\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n  max-width: calc(100% / 1.5);\n  width: fit-content;\n\n  ","\n"])),k.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(D||(D=(0,g.A)(["\n      background-color: ",";\n    "])),k.f.colors.secondaryMsm)})),H=h.Ay.div(P||(P=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),K=(h.Ay.img(F||(F=(0,g.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(T||(T=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"])))),Q=h.Ay.p(L||(L=(0,g.A)(["\n  font-size: 18px;\n"]))),U=h.Ay.img(V||(V=(0,g.A)(["\nwidth:100%\n  // width: 250px;\n  height: auto;\n"]))),W=h.Ay.div($||($=(0,g.A)(["\n  display: flex;\n  justify-content: right;\n"]))),q=h.Ay.p(_||(_=(0,g.A)(["\n  font-size: 14px;\n"]))),Y=n=>{let{message:e,user:t,onModal:o,messagesEndRef:r}=n;return(0,b.jsx)(J,{$ownMessage:e.data.uid===t.uid,children:(0,b.jsxs)(G,{$ownMessage:e.data.uid===t.uid,ref:r,children:[(0,b.jsxs)(H,{children:[(0,b.jsx)(M.A,{user:e.data}),(0,b.jsx)(K,{children:e.data.displayName})]}),(0,b.jsx)(Q,{children:e.data.text}),U&&e.data.file&&(0,b.jsx)(U,{src:e.data.file,alt:"document_img",onClick:()=>o(e.data.file)}),(0,b.jsx)(W,{children:(0,b.jsx)(q,{children:N(e.data.timestamp)})})]})})};var B,O,X,Z,nn,en,tn,on,rn;const an=h.Ay.div(B||(B=(0,g.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n  padding: 10px;\n\n  border: 0.5px solid;\n  border-radius: 12px;\n\n  background-color: ",";\n"])),k.f.background.bgSecondary),sn=(h.Ay.div(O||(O=(0,g.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),h.Ay.div(X||(X=(0,g.A)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),k.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(Z||(Z=(0,g.A)(["\n      background-color: ",";\n    "])),k.f.colors.secondaryMsm)})),h.Ay.div(nn||(nn=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),h.Ay.img(en||(en=(0,g.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(tn||(tn=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),h.Ay.p(on||(on=(0,g.A)(["\n  font-size: 14px;\n"]))),h.Ay.img(rn||(rn=(0,g.A)(["\n  width: 250px;\n  height: auto;\n"]))),n=>{let{messages:e,user:t,messagesEndRef:o,onModal:r}=n;return(0,b.jsx)(an,{children:e.map((n=>(0,b.jsx)(Y,{message:n,user:t,messagesEndRef:o,onModal:r},n.id)))})});var dn,ln,cn,mn;const un=h.Ay.div(dn||(dn=(0,g.A)(["\n  position: relative;\n"]))),pn=h.Ay.div(ln||(ln=(0,g.A)(["\n  position: absolute;\n  top: 17px;\n  right: 150px;\n"]))),xn=h.Ay.label(cn||(cn=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),gn=h.Ay.input(mn||(mn=(0,g.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"])));var hn=t(3156);const fn=n=>{let{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:r,btnName:a,btnDisabled:i,formSize:s,onAddIcon:d}=n;return(0,b.jsxs)(un,{children:[(0,b.jsx)(A,{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:r,btnName:a,btnDisabled:i,formSize:s}),(0,b.jsxs)(pn,{children:[(0,b.jsx)(gn,{type:"file",accept:"image/*",id:"paperclip",onChange:d}),(0,b.jsx)(xn,{htmlFor:"paperclip",children:(0,b.jsx)(hn.EHs,{})})]})]})};var yn;const bn=h.Ay.div(yn||(yn=(0,g.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"]))),An=n=>{let{room:e,setRoom:t}=n;const[o,r]=(0,a.useState)(!1);return(0,b.jsxs)(bn,{children:[(0,b.jsx)(x.A,{name:o?"Copied!":"Click here to copy invitation",type:"button",func:async()=>{await navigator.clipboard.writeText(e),r(!0)}}),(0,b.jsx)(x.A,{func:()=>{localStorage.removeItem("room"),t("")},name:"Return",type:"button"})]})};var vn;const jn=h.Ay.div(vn||(vn=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  width: 100%;\n"]))),wn=n=>{let{room:e,setRoom:t,messages:o,user:r,messagesEndRef:a,onModal:i,onSubmit:s,formValue:d,onFormChange:l,formPlaceholder:c,btnName:m,btnDisabled:u,formSize:p,onAddIcon:x}=n;return(0,b.jsxs)(jn,{children:[(0,b.jsx)(An,{room:e,setRoom:t}),(0,b.jsx)(sn,{messages:o,user:r,messagesEndRef:a,onModal:i}),(0,b.jsx)(fn,{onSubmit:s,formValue:d,onFormChange:l,formPlaceholder:c,btnName:m,btnDisabled:u,formSize:p,onAddIcon:x})]})};var Sn,kn,Rn,Cn=t(7950);const En=h.Ay.div(Sn||(Sn=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n\n  background-color: transparent;\n"]))),Mn=h.Ay.div(kn||(kn=(0,g.A)(["\n  position: relative;\n\n  width: calc(100% - 30px);\n  max-width: 541px;\n  height: auto;\n  max-height: calc(100vh - 30px);\n\n  padding: 40px 20px 20px 20px;\n  overflow-y: auto;\n\n  border-radius: 12px;\n\n  background-color: ",";\n"])),k.f.background.bgSecondary),Nn=h.Ay.button(Rn||(Rn=(0,g.A)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  padding: 0;\n\n  cursor: pointer;\n  border: none;\n\n  background-color: transparent;\n"])));var zn=t(423);const In=document.getElementById("modal-root"),Dn=n=>{let{onClose:e,children:t}=n;(0,a.useEffect)((()=>{const n=n=>{"Escape"===n.code&&e()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[e]);return(0,Cn.createPortal)((0,b.jsx)(En,{onClick:n=>{n.currentTarget===n.target&&e()},children:(0,b.jsxs)(Mn,{children:[(0,b.jsx)(Nn,{onClick:e,children:(0,b.jsx)(zn.WQq,{})}),t]})}),In)};var Pn;const Fn=h.Ay.img(Pn||(Pn=(0,g.A)(["\n  width: 500px;\n  height: auto;\n"]))),Tn=n=>{let{onClose:e,picture:t}=n;return(0,b.jsx)(Dn,{onClose:e,children:(0,b.jsx)(Fn,{src:t,alt:"preLoad_img"})})};var Ln,Vn;const $n=h.Ay.img(Ln||(Ln=(0,g.A)(["\n  width: 500px;\n  height: auto;\n"]))),_n=h.Ay.div(Vn||(Vn=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Jn=n=>{let{onClose:e,picture:t,btnRemoveName:o,btnSentName:r,onSubmit:a}=n;return(0,b.jsxs)(Dn,{onClose:e,children:[(0,b.jsx)($n,{src:t,alt:"preLoad_img"}),(0,b.jsxs)(_n,{children:[(0,b.jsx)(x.A,{type:"button",name:o,func:e,btnType:"remove"}),(0,b.jsx)(x.A,{type:"button",name:r,func:a})]})]})};var Gn=t(2298);const Hn=()=>{const[n,e]=(0,a.useState)(null),t=(0,a.useRef)(null),[o,r]=(0,a.useState)(""),[p,x]=(0,a.useState)([]),[g,h]=(0,a.useState)(""),[f,y]=(0,a.useState)(null),[A,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[R,C]=(0,a.useState)(""),[M,N]=(0,a.useState)(!1),[z,I]=(0,a.useState)("");(0,a.useEffect)((()=>{(0,d.hg)(l.j2,(n=>{if(n){e(n);const t=localStorage.getItem("room");r(t)}else e(null),localStorage.removeItem("room"),r("")}))}),[]),(0,a.useEffect)((()=>{const n=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i._M)("room","==",o),(0,i.My)("timestamp")),e=(0,i.aQ)(n,(n=>{x(n.docs.map((n=>({id:n.id,data:n.data()}))))}));return P(),e}),[o]),(0,a.useEffect)((()=>{f&&T()}),[f]);const D=async e=>{e.preventDefault(),""===g.trim()&&""===A||(await T(),(async()=>{await(0,i.gS)((0,i.rJ)(l.db,"messages"),{uid:n.uid,photoURL:n.photoURL,displayName:n.displayName,text:g,timestamp:(0,i.O5)(),room:o,file:A}),h("")})(),w(!1),h(""),y(null),v(""))};(0,a.useEffect)((()=>{P()}),[p]);const P=()=>{var n;null===(n=t.current)||void 0===n||n.scrollIntoView({block:"end",inline:"end"})},F=n=>{I(n),N((n=>!n))},T=async()=>{if(null==f)return;w(!0),k(!0);const n=f.name+(0,c.Ak)();C(n);const e=(0,s.KR)(l.IG,"images/room/".concat(o,"/").concat(n));await(0,s.D)(e,f).then((n=>{(0,s.qk)(n.ref).then((n=>{v(n),k(!1)}))})).catch((n=>{console.error("Error uploading file:",n),k(!1)})),y(null)};return(0,b.jsxs)(m.A,{children:[(0,b.jsx)(u.A,{children:o?(0,b.jsx)(wn,{room:o,setRoom:r,messages:p,user:n,messagesEndRef:t,onModal:F,onSubmit:D,formValue:g,onFormChange:n=>h(n.target.value),formPlaceholder:"Insert your message here...",btnName:"SENT",btnDisabled:null!==f,formSize:"500px",onAddIcon:n=>y(n.target.files[0])}):(0,b.jsx)(E,{setRoom:n=>{r(n)},user:n})}),j?S?(0,b.jsx)(Gn.A,{}):(0,b.jsx)(Jn,{onClose:()=>{w(!1),y(null),v(""),(0,s.XR)((0,s.KR)(l.IG,"images/room/".concat(o,"/").concat(R)))},picture:A,btnRemoveName:"DELETE FILE",btnSentName:"SENT",onSubmit:D}):null,M&&(0,b.jsx)(Tn,{onClose:F,picture:z})]})}}}]);
//# sourceMappingURL=215.3d5090fd.chunk.js.map