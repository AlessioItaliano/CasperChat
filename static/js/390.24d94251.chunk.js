"use strict";(self.webpackChunkmessenger_app=self.webpackChunkmessenger_app||[]).push([[390],{492:(n,e,t)=>{t.d(e,{A:()=>l});var o,r=t(528),i=t(197),a=t(255);const s=i.Ay.div(o||(o=(0,r.A)(["\n  padding: 0 72px;\n  margin: 0 auto;\n  min-width: ",";\n  max-width: ",";\n\n  @media screen and (min-width: ",") {\n    padding: 0 88px;\n    min-width: 768px;\n  }\n  @media screen and (min-width: ",") {\n    padding: 0 81px;\n    max-width: 1440px;\n  }\n"])),a.f.breakpoints.mobileMin,a.f.breakpoints.mobileMax,a.f.breakpoints.tablet,a.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},774:(n,e,t)=>{t.d(e,{A:()=>l});var o,r=t(528),i=t(197),a=t(255);const s=i.Ay.section(o||(o=(0,r.A)(["\n  padding: 30px 0;\n\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n"])),a.f.breakpoints.tablet,a.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},390:(n,e,t)=>{t.r(e),t.d(e,{default:()=>ee});var o,r,i,a=t(43),s=t(32),d=t(147),l=t(764),c=t(88),p=t(712),u=t(774),x=t(492),m=t(950),g=t(528),h=t(197),f=t(255);const y=h.Ay.div(o||(o=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n\n  background-color: transparent;\n"]))),A=h.Ay.div(r||(r=(0,g.A)(["\n  position: relative;\n\n  width: calc(100% - 30px);\n  max-width: 541px;\n  height: auto;\n  max-height: calc(100vh - 30px);\n\n  padding: 40px 20px 20px 20px;\n  overflow-y: auto;\n\n  border-radius: 12px;\n\n  background-color: ",";\n"])),f.f.background.bgSecondary),b=h.Ay.button(i||(i=(0,g.A)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  padding: 0;\n\n  cursor: pointer;\n  border: none;\n\n  background-color: transparent;\n"])));var v=t(423),w=t(579);const j=document.getElementById("modal-root"),k=n=>{let{onClose:e,children:t}=n;(0,a.useEffect)((()=>{const n=n=>{"Escape"===n.code&&e()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[e]);return(0,m.createPortal)((0,w.jsx)(y,{onClick:n=>{n.currentTarget===n.target&&e()},children:(0,w.jsxs)(A,{children:[(0,w.jsx)(b,{onClick:e,children:(0,w.jsx)(v.WQq,{})}),t]})}),j)};var S;const C=h.Ay.img(S||(S=(0,g.A)(["\n  width: 100%;\n  height: 100%;\n"]))),R=n=>{let{onClose:e,picture:t}=n;return(0,w.jsx)(k,{onClose:e,children:(0,w.jsx)(C,{src:t,alt:"large_img"})})};var M=t(13),E=t(583),z=t(665);const N=n=>{let{options:e,selectedRoom:t,onSelectRoom:o}=n;return(0,w.jsx)(z.Ay,{options:e,value:t,onChange:o,styles:{control:n=>({...n,height:"auto",padding:"7px 15px",borderRadius:"12px",border:"none",width:"291px"}),valueContainer:n=>({...n,padding:"0",margin:"0"}),indicatorsContainer:n=>({...n,padding:"0",margin:"0"}),input:n=>({...n,padding:"0",margin:"0"})}})};var I,P;const $=h.Ay.div(I||(I=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  gap: 30px;\n\n  // padding: 48px;\n  height: 80vh;\n  // background-color: ",";\n  background-color: inherit;\n  border-radius: 12px;\n"])),f.f.background.bgTertiary),D=h.Ay.p(P||(P=(0,g.A)(["\n  color: ",";\n\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 1.62em;\n  text-transform: uppercase;\n"])),f.f.colors.secondaryText);var F,L;const T=h.Ay.form(F||(F=(0,g.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  justify-content: center;\n  width: ",";\n"])),(n=>n.$formSize)),_=h.Ay.input(L||(L=(0,g.A)(["\n  height: auto;\n  padding: 15px;\n  border-radius: 12px;\n  border: none;\n  width: 100%;\n"]))),V=n=>{let{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:r,btnName:i,btnDisabled:a,formSize:s}=n;return(0,w.jsxs)(T,{onSubmit:e,$formSize:s,children:[(0,w.jsx)(_,{value:t,onChange:o,placeholder:r}),(0,w.jsx)(E.A,{name:i,type:"submit",disabled:a})]})},J=n=>{let{setRoom:e,user:t}=n;const[o,r]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[l,u]=(0,a.useState)("");(0,a.useEffect)((()=>{const n=(0,s.P)((0,s.rJ)(c.db,"messages"),(0,s.My)("timestamp"));return(0,s.aQ)(n,(n=>{d(n.docs.filter((n=>n.data().uid===t.uid)).map(((n,e)=>({value:n.data().room,label:"Room ".concat(e+1)}))))}))}),[t]);const x=async n=>{try{const e=(0,s.P)((0,s.rJ)(c.db,"messages"),(0,s._M)("room","==",n));return!(await(0,s.GG)(e)).empty}catch(e){return console.error("Error checking room existence:",e),!1}};return(0,w.jsxs)($,{children:[(0,w.jsx)(D,{children:"Do you want create new room ?"}),(0,w.jsx)(E.A,{func:()=>{const n=(0,p.Ak)();e(n),localStorage.setItem("room",n),M.Notify.success("Room has been created!")},name:"Create room",type:"button",size:"291px"}),(0,w.jsx)(D,{children:"---------- or ---------"}),(0,w.jsx)(D,{children:"You already have privet rooms?"}),(0,w.jsx)(N,{options:i,selectedRoom:l,onSelectRoom:n=>{u(n.value),localStorage.setItem("room",n.value),e(n.value),M.Notify.success("Welcome back!")}}),(0,w.jsx)(D,{children:"---------- or ---------"}),(0,w.jsx)(D,{children:"You already have invitation?"}),(0,w.jsx)(V,{onSubmit:async n=>{n.preventDefault();await x(o)?(localStorage.setItem("room",o),e(o),M.Notify.success("Welcome aboard!")):M.Notify.failure("Room does not exist. Please enter a valid room number.")},inputValue:o,onFormChange:n=>r(n.target.value),formPlaceholder:"Insert your invitation here...",btnName:"Join",formSize:"291px"})]})};var G,H,Q,W,q,K,U,Y,B,O=t(766);h.Ay.div(G||(G=(0,g.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n  padding: 10px;\n\n  border: none;\n  border-radius: 12px;\n\n  background-color: ",";\n"])),f.f.background.bgSecondary);const X=h.Ay.div(H||(H=(0,g.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),Z=h.Ay.div(Q||(Q=(0,g.A)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),f.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(W||(W=(0,g.A)(["\n      background-color: ",";\n    "])),f.f.colors.secondaryMsm)})),nn=h.Ay.div(q||(q=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),en=(h.Ay.img(K||(K=(0,g.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(U||(U=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"])))),tn=h.Ay.p(Y||(Y=(0,g.A)(["\n  font-size: 14px;\n"]))),on=h.Ay.img(B||(B=(0,g.A)(["\n  width: 250px;\n  height: auto;\n"]))),rn=n=>{let{message:e,user:t,onModal:o}=n;const r=(0,a.useRef)(null);return(0,w.jsx)(X,{$ownMessage:e.data.uid===t.uid,ref:r,children:(0,w.jsxs)(Z,{$ownMessage:e.data.uid===t.uid,ref:r,children:[(0,w.jsxs)(nn,{children:[(0,w.jsx)(O.A,{user:e.data}),(0,w.jsx)(en,{children:e.data.displayName})]}),(0,w.jsx)(tn,{children:e.data.text}),on&&e.data.file&&(0,w.jsx)(on,{src:e.data.file,alt:"document_img",onClick:()=>o(e.data.file)})]})})};var an,sn,dn,ln,cn,pn,un,xn,mn;const gn=h.Ay.div(an||(an=(0,g.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n  padding: 10px;\n\n  border: 0.5px solid;\n  border-radius: 12px;\n\n  background-color: ",";\n"])),f.f.background.bgSecondary),hn=(h.Ay.div(sn||(sn=(0,g.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),h.Ay.div(dn||(dn=(0,g.A)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),f.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(ln||(ln=(0,g.A)(["\n      background-color: ",";\n    "])),f.f.colors.secondaryMsm)})),h.Ay.div(cn||(cn=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),h.Ay.img(pn||(pn=(0,g.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(un||(un=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),h.Ay.p(xn||(xn=(0,g.A)(["\n  font-size: 14px;\n"]))),h.Ay.img(mn||(mn=(0,g.A)(["\n  width: 250px;\n  height: auto;\n"]))),n=>{let{messages:e,user:t,messagesEndRef:o,onModal:r}=n;return(0,w.jsx)(gn,{children:e.map((n=>(0,w.jsx)(rn,{message:n,user:t,messagesEndRef:o,onModal:r},n.id)))})});var fn,yn,An,bn;const vn=h.Ay.div(fn||(fn=(0,g.A)(["\n  position: relative;\n"]))),wn=h.Ay.div(yn||(yn=(0,g.A)(["\n  position: absolute;\n  top: 17px;\n  right: 150px;\n"]))),jn=h.Ay.label(An||(An=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),kn=h.Ay.input(bn||(bn=(0,g.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"])));var Sn=t(156);const Cn=n=>{let{onSubmit:e,inputValue:t,onFormChange:o,formPlaceholder:r,btnName:i,btnDisabled:a,formSize:s,onAddIcon:d}=n;return(0,w.jsxs)(vn,{children:[(0,w.jsx)(V,{onSubmit:e,inputValue:t,onFormChange:o,formPlaceholder:r,btnName:i,btnDisabled:a,formSize:s}),(0,w.jsxs)(wn,{children:[(0,w.jsx)(kn,{type:"file",accept:"image/*",id:"paperclip",onChange:d}),(0,w.jsx)(jn,{htmlFor:"paperclip",children:(0,w.jsx)(Sn.EHs,{})})]})]})};var Rn,Mn;const En=h.Ay.img(Rn||(Rn=(0,g.A)(["\n  width: 500px;\n  height: auto;\n"]))),zn=h.Ay.div(Mn||(Mn=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Nn=n=>{let{onClose:e,picture:t,btnRemoveName:o,btnSentName:r,onSubmit:i}=n;return(0,w.jsxs)(k,{onClose:e,children:[(0,w.jsx)(En,{src:t,alt:"preLoad_img"}),(0,w.jsxs)(zn,{children:[(0,w.jsx)(E.A,{type:"button",name:o,func:e,btnType:"remove"}),(0,w.jsx)(E.A,{type:"button",name:r,func:i})]})]})};var In;const Pn=h.Ay.div(In||(In=(0,g.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"]))),$n=n=>{let{room:e,setRoom:t}=n;const[o,r]=(0,a.useState)(!1);return(0,w.jsxs)(Pn,{children:[(0,w.jsx)(E.A,{name:o?"Copied!":"Click here to copy invitation",type:"button",func:async()=>{await navigator.clipboard.writeText(e),r(!0)}}),(0,w.jsx)(E.A,{func:()=>{localStorage.removeItem("room"),t("")},name:"Return",type:"button"})]})};var Dn,Fn,Ln,Tn,_n,Vn,Jn,Gn,Hn,Qn,Wn,qn,Kn,Un,Yn,Bn,On,Xn,Zn;const ne=h.Ay.div(Dn||(Dn=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  // padding: 15px 0;\n  width: 100%;\n"]))),ee=(h.Ay.div(Fn||(Fn=(0,g.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n"]))),h.Ay.form(Ln||(Ln=(0,g.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  width: 500px;\n"]))),h.Ay.input(Tn||(Tn=(0,g.A)(["\n  width: 100%;\n  height: auto;\n  padding: 10px;\n"]))),h.Ay.div(_n||(_n=(0,g.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),h.Ay.div(Vn||(Vn=(0,g.A)(["\n  background-color: #f0f0f0;\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(Jn||(Jn=(0,g.A)(["\n      background-color: #dcf8c6;\n    "])))})),h.Ay.div(Gn||(Gn=(0,g.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),h.Ay.img(Hn||(Hn=(0,g.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(Qn||(Qn=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),h.Ay.p(Wn||(Wn=(0,g.A)(["\n  font-size: 14px;\n"]))),h.Ay.input(qn||(qn=(0,g.A)(["\n  background: inherit;\n  border: none;\n  cursor: pointer;\n  width: 30px;\n  height: auto;\n"]))),h.Ay.label(Kn||(Kn=(0,g.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),h.Ay.input(Un||(Un=(0,g.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),h.Ay.div(Yn||(Yn=(0,g.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  flex-direction: column;\n"]))),h.Ay.div(Bn||(Bn=(0,g.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"]))),h.Ay.div(On||(On=(0,g.A)(["\n  width: 250px;\n  height: 250px;\n\n  position: relative;\n"]))),h.Ay.img(Xn||(Xn=(0,g.A)(["\n  width: 250px;\n  height: auto;\n"]))),h.Ay.button(Zn||(Zn=(0,g.A)(["\n  // width: 25px;\n  height: 25px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: absolute;\n  top: 5px;\n  right: 5px;\n\n  border-radius: 50%;\n  border: none;\n  background-color: red;\n\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: white;\n    border: 0.5px solid white;\n  }\n"]))),()=>{const[n,e]=(0,a.useState)(null),t=(0,a.useRef)(null),[o,r]=(0,a.useState)(""),[i,m]=(0,a.useState)([]),[g,h]=(0,a.useState)(""),[f,y]=(0,a.useState)(null),[A,b]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[C,M]=(0,a.useState)(""),[E,z]=(0,a.useState)(!1),[N,I]=(0,a.useState)("");(0,a.useEffect)((()=>{(0,l.hg)(c.j2,(n=>{if(n){e(n);const t=localStorage.getItem("room");r(t)}else e(null),localStorage.removeItem("room"),r("")}))}),[]);(0,a.useEffect)((()=>{const n=(0,s.P)((0,s.rJ)(c.db,"messages"),(0,s._M)("room","==",o),(0,s.My)("timestamp"));return(0,s.aQ)(n,(n=>{m(n.docs.map((n=>({id:n.id,data:n.data()})))),$()}))}),[o]);const P=async e=>{e.preventDefault(),""===g.trim()&&""===A||(await D(),(async()=>{await(0,s.gS)((0,s.rJ)(c.db,"messages"),{uid:n.uid,photoURL:n.photoURL,displayName:n.displayName,text:g,timestamp:(0,s.O5)(),room:o,file:A}),h("")})(),j(!1),h(""),y(null),b(""))},$=()=>{var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)((()=>{f&&D()}),[f]);const D=async()=>{if(null==f)return;j(!0),S(!0);const n=f.name+(0,p.Ak)();M(n);const e=(0,d.KR)(c.IG,"images/room/".concat(o,"/").concat(n));await(0,d.D)(e,f).then((n=>{(0,d.qk)(n.ref).then((n=>{b(n),S(!1)}))})).catch((n=>{console.error("Error uploading file:",n),S(!1)})),y(null)},F=n=>{I(n),z((n=>!n))};return(0,w.jsxs)(u.A,{children:[(0,w.jsx)(x.A,{children:o?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(ne,{children:[(0,w.jsx)($n,{room:o,setRoom:r}),(0,w.jsx)(hn,{messages:i,user:n,messagesEndRef:t,onModal:F}),(0,w.jsx)(Cn,{onSubmit:P,inputValue:g,onFormChange:n=>h(n.target.value),formPlaceholder:"Insert your message here...",btnName:"SENT",btnDisabled:null!==f,formSize:"500px",onAddIcon:n=>y(n.target.files[0])}),v?k?(0,w.jsx)("p",{children:"Loading..."}):(0,w.jsx)(Nn,{onClose:()=>{j(!1),y(null),b(""),(0,d.XR)((0,d.KR)(c.IG,"images/room/".concat(o,"/").concat(C)))},picture:A,btnRemoveName:"DELETE FILE",btnSentName:"SENT",onSubmit:P}):null]})}):(0,w.jsx)(J,{setRoom:n=>{r(n)},user:n})}),E&&(0,w.jsx)(R,{onClose:F,picture:N})]})})}}]);
//# sourceMappingURL=390.24d94251.chunk.js.map