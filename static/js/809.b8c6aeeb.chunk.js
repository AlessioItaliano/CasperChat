"use strict";(self.webpackChunkmessenger_app=self.webpackChunkmessenger_app||[]).push([[809],{492:(n,e,t)=>{t.d(e,{A:()=>l});var o,i=t(528),r=t(197),a=t(255);const s=r.Ay.div(o||(o=(0,i.A)(["\n  padding: 0 72px;\n  margin: 0 auto;\n  min-width: ",";\n  max-width: ",";\n\n  @media screen and (min-width: ",") {\n    padding: 0 88px;\n    min-width: 768px;\n  }\n  @media screen and (min-width: ",") {\n    padding: 0 81px;\n    max-width: 1440px;\n  }\n"])),a.f.breakpoints.mobileMin,a.f.breakpoints.mobileMax,a.f.breakpoints.tablet,a.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},774:(n,e,t)=>{t.d(e,{A:()=>l});var o,i=t(528),r=t(197),a=t(255);const s=r.Ay.section(o||(o=(0,i.A)(["\n  padding: 30px 0;\n\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n"])),a.f.breakpoints.tablet,a.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},809:(n,e,t)=>{t.r(e),t.d(e,{default:()=>kn});var o,i,r,a,s,d,l,c,p,u,x,h,g,m,f,y,A,b,v,j=t(43),w=t(32),k=t(88),S=t(712),C=t(156),R=t(147),E=t(764),I=t(423),M=t(528),_=t(197);const N=_.Ay.div(o||(o=(0,M.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  // padding: 15px 0;\n  width: 100%;\n"]))),z=_.Ay.div(i||(i=(0,M.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n"]))),L=_.Ay.form(r||(r=(0,M.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  width: 500px;\n"]))),T=_.Ay.input(a||(a=(0,M.A)(["\n  width: 100%;\n  height: auto;\n  padding: 10px;\n"]))),D=_.Ay.div(s||(s=(0,M.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),J=_.Ay.div(d||(d=(0,M.A)(["\n  background-color: #f0f0f0;\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),(n=>{let{$ownMessage:e}=n;return e&&(0,_.AH)(l||(l=(0,M.A)(["\n      background-color: #dcf8c6;\n    "])))})),Q=_.Ay.div(c||(c=(0,M.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),W=_.Ay.img(p||(p=(0,M.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),$=_.Ay.h2(u||(u=(0,M.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),q=_.Ay.p(x||(x=(0,M.A)(["\n  font-size: 14px;\n"]))),P=(_.Ay.input(h||(h=(0,M.A)(["\n  background: inherit;\n  border: none;\n  cursor: pointer;\n  width: 30px;\n  height: auto;\n"]))),_.Ay.label(g||(g=(0,M.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"])))),U=_.Ay.input(m||(m=(0,M.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),F=(_.Ay.div(f||(f=(0,M.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  flex-direction: column;\n"]))),_.Ay.div(y||(y=(0,M.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"])))),G=_.Ay.div(A||(A=(0,M.A)(["\n  width: 250px;\n  height: 250px;\n\n  position: relative;\n"]))),H=_.Ay.img(b||(b=(0,M.A)(["\n  width: 250px;\n  height: auto;\n"]))),K=_.Ay.button(v||(v=(0,M.A)(["\n  // width: 25px;\n  height: 25px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: absolute;\n  top: 5px;\n  right: 5px;\n\n  border-radius: 50%;\n  border: none;\n  background-color: red;\n\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: white;\n    border: 0.5px solid white;\n  }\n"])));var Y,B,O,V=t(583),X=t(774),Z=t(492),nn=t(950),en=t(255);const tn=_.Ay.div(Y||(Y=(0,M.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n\n  background-color: grey;\n"]))),on=_.Ay.div(B||(B=(0,M.A)(["\n  position: relative;\n\n  width: calc(100% - 30px);\n  // max-width: 541px;\n  height: auto;\n  // max-height: calc(100vh - 30px);\n\n  padding: 40px 20px 20px 20px;\n  overflow-y: auto;\n\n  border-radius: 24px;\n\n  background-color: ",";\n"])),en.f.background.bgSecondary),rn=_.Ay.button(O||(O=(0,M.A)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  padding: 0;\n\n  cursor: pointer;\n  border: none;\n\n  background-color: transparent;\n"])));var an=t(579);const sn=document.getElementById("modal-root"),dn=n=>{let{onClose:e,children:t}=n;(0,j.useEffect)((()=>{const n=n=>{"Escape"===n.code&&e()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[e]);return(0,nn.createPortal)((0,an.jsx)(tn,{onClick:n=>{n.currentTarget===n.target&&e()},children:(0,an.jsxs)(on,{children:[(0,an.jsx)(rn,{onClick:e,children:(0,an.jsx)(I.WQq,{})}),t]})}),sn)};var ln;const cn=_.Ay.img(ln||(ln=(0,M.A)(["\n  width: 100%;\n  height: 100%;\n"]))),pn=n=>{let{onClose:e,picture:t}=n;return(0,an.jsx)(dn,{onClose:e,children:(0,an.jsx)(cn,{src:t,alt:"large_img"})})};var un,xn,hn,gn,mn=t(13);const fn=_.Ay.div(un||(un=(0,M.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  gap: 30px;\n\n  // padding: 48px;\n  height: 80vh;\n  // background-color: ",";\n  background-color: inherit;\n  border-radius: 12px;\n"])),en.f.background.bgTertiary),yn=_.Ay.p(xn||(xn=(0,M.A)(["\n  color: ",";\n\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 1.62em;\n  text-transform: uppercase;\n"])),en.f.colors.secondaryText),An=_.Ay.form(hn||(hn=(0,M.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n"]))),bn=_.Ay.input(gn||(gn=(0,M.A)(["\n  height: auto;\n  padding: 15px;\n  border-radius: 12px;\n  border: none;\n  width: 223px;\n"])));var vn=t(665);const jn=n=>{let{options:e,selectedRoom:t,onSelectRoom:o}=n;return(0,an.jsx)(vn.Ay,{options:e,value:t,onChange:o,styles:{control:n=>({...n,height:"auto",padding:"7px 15px",borderRadius:"12px",border:"none",width:"340px"}),valueContainer:n=>({...n,padding:"0",margin:"0"}),indicatorsContainer:n=>({...n,padding:"0",margin:"0"}),input:n=>({...n,padding:"0",margin:"0"})}})},wn=n=>{let{setRoom:e,user:t}=n;const[o,i]=(0,j.useState)(""),[r,a]=(0,j.useState)(""),[s,d]=(0,j.useState)("");(0,j.useEffect)((()=>{const n=(0,w.P)((0,w.rJ)(k.db,"messages"),(0,w.My)("timestamp"));return(0,w.aQ)(n,(n=>{a(n.docs.filter((n=>n.data().uid===t.uid)).map(((n,e)=>({value:n.data().room,label:"Room ".concat(e+1)}))))}))}),[t]);return(0,an.jsxs)(fn,{children:[(0,an.jsx)(yn,{children:"Do you want create new room ?"}),(0,an.jsx)(V.A,{func:()=>{const n=(0,S.Ak)();e(n),localStorage.setItem("room",n),mn.Notify.success("Room has been created!")},name:"Create room",type:"button",size:"340px"}),(0,an.jsx)(yn,{children:"---------- or ---------"}),(0,an.jsx)(yn,{children:"You already have privet rooms?"}),(0,an.jsx)(jn,{options:r,selectedRoom:s,onSelectRoom:n=>{d(n.value),localStorage.setItem("room",n),e(n),mn.Notify.success("Welcome back!")}}),(0,an.jsx)(yn,{children:"---------- or ---------"}),(0,an.jsx)(yn,{children:"You already have invitation?"}),(0,an.jsxs)(An,{onClick:n=>{n.preventDefault(),localStorage.setItem("room",o),e(o),mn.Notify.success("Welcome aboard!")},children:[(0,an.jsx)(bn,{type:"text",value:o,onChange:n=>i(n.target.value),placeholder:"Insert your invitation here..."}),(0,an.jsx)(V.A,{name:"Join",type:"submit"})]})]})},kn=()=>{const[n,e]=(0,j.useState)(null),t=(0,j.useRef)(null),[o,i]=(0,j.useState)(""),[r,a]=(0,j.useState)(!1),[s,d]=(0,j.useState)([]),[l,c]=(0,j.useState)(""),[p,u]=(0,j.useState)(null),[x,h]=(0,j.useState)(""),[g,m]=(0,j.useState)(!1),[f,y]=(0,j.useState)(!1),[A,b]=(0,j.useState)(""),[v,M]=(0,j.useState)(!1),[_,Y]=(0,j.useState)("");(0,j.useEffect)((()=>{(0,E.hg)(k.j2,(n=>{if(n){e(n);const t=localStorage.getItem("room");i(t)}else e(null),localStorage.removeItem("room"),i("")}))}),[]);(0,j.useEffect)((()=>{const n=(0,w.P)((0,w.rJ)(k.db,"messages"),(0,w._M)("room","==",o),(0,w.My)("timestamp"));return(0,w.aQ)(n,(n=>{d(n.docs.map((n=>({id:n.id,data:n.data()})))),B()}))}),[o]);const B=()=>{var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})};(0,j.useEffect)((()=>{p&&O()}),[p]);const O=async()=>{if(null==p)return;m(!0),y(!0);const n=p.name+(0,S.Ak)();b(n);const e=(0,R.KR)(k.IG,"images/room/".concat(o,"/").concat(n));await(0,R.D)(e,p).then((n=>{(0,R.qk)(n.ref).then((n=>{h(n),y(!1)}))})).catch((n=>{console.error("Error uploading file:",n),y(!1)})),u(null)},nn=n=>{Y(n),M((n=>!n))};return(0,an.jsxs)(X.A,{children:[(0,an.jsx)(Z.A,{children:o?(0,an.jsx)(an.Fragment,{children:(0,an.jsxs)(N,{children:[(0,an.jsxs)(F,{children:[(0,an.jsx)(V.A,{name:r?"Copied!":"Click here to copy invitation",type:"button",func:async()=>{await navigator.clipboard.writeText(o),a(!0)}}),(0,an.jsx)(V.A,{func:()=>{localStorage.removeItem("room"),i("")},name:"Return",type:"button"})]}),(0,an.jsx)(z,{children:(0,an.jsx)("div",{children:s.map((e=>(0,an.jsx)(D,{$ownMessage:e.data.uid===n.uid,children:(0,an.jsxs)(J,{$ownMessage:e.data.uid===n.uid,ref:t,children:[(0,an.jsxs)(Q,{children:[(0,an.jsx)(W,{src:e.data.photoURL,alt:"avatar_of_user"}),(0,an.jsx)($,{children:e.data.displayName})]}),(0,an.jsx)(q,{children:e.data.text}),H&&e.data.file&&(0,an.jsx)(H,{src:e.data.file,alt:"document_img",onClick:()=>nn(e.data.file)})]})},e.id)))})}),(0,an.jsxs)(L,{onSubmit:async e=>{e.preventDefault(),""===l.trim()&&""===x||(await O(),(async()=>{await(0,w.gS)((0,w.rJ)(k.db,"messages"),{uid:n.uid,photoURL:n.photoURL,displayName:n.displayName,text:l,timestamp:(0,w.O5)(),room:o,file:x}),c("")})(),m(!1),u(null),h(""))},children:[(0,an.jsx)(U,{type:"file",accept:"image/*",id:"paperclip",onChange:n=>u(n.target.files[0])}),(0,an.jsx)(P,{htmlFor:"paperclip",children:(0,an.jsx)(C.EHs,{})}),(0,an.jsx)(T,{value:l,onChange:n=>c(n.target.value),placeholder:"Insert your message here..."}),(0,an.jsx)(V.A,{name:"SENT",type:"submit",disabled:null!==p})]}),g?f?(0,an.jsx)("p",{children:"Loading..."}):(0,an.jsxs)(G,{children:[(0,an.jsx)(K,{type:"button",onClick:()=>{m(!1),u(null),h(""),(0,R.XR)((0,R.KR)(k.IG,"images/room/".concat(o,"/").concat(A)))},children:(0,an.jsx)(I.WQq,{})}),(0,an.jsx)(H,{src:x,alt:"document_img"})]}):null]})}):(0,an.jsx)(wn,{setRoom:n=>{i(n)},user:n})}),v&&(0,an.jsx)(pn,{onClose:nn,picture:_})]})}}}]);
//# sourceMappingURL=809.b8c6aeeb.chunk.js.map