{"version":3,"file":"static/js/620.45ed9732.chunk.js","mappings":"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","sources":["components/Button/Button.styled.js","components/Button/Button.jsx","components/Chat/Chat.styled.js","components/Chat/Chat.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const Button = styled.button`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  padding: 11px 21px;\n\n  cursor: pointer;\n\n  border-radius: 5px;\n  border: 1px solid black;\n  background: lightgrey;\n\n  color: black;\n\n  font-size: 16px;\n  font-weight: 500;\n\n  &:focus,\n  &:hover,\n  &:active {\n    color: red;\n  }\n`;\n","import * as s from './Button.styled';\n\nconst Button = ({ func, name, type }) => {\n  return (\n    <s.Button type={type} onClick={func}>\n      {name}\n    </s.Button>\n  );\n};\n\nexport default Button;\n","import styled, { css } from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 15px 0;\n  width: 100%;\n`;\n\nexport const Chat = styled.div`\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n`;\n\nexport const Form = styled.form``;\n\nexport const Input = styled.input``;\n\nexport const ChatMessage = styled.div`\n  display: flex;\n  justify-content: ${({ $ownMessage }) =>\n    $ownMessage ? 'flex-end' : 'flex-start'};\n`;\n\nexport const Message = styled.div`\n  background-color: #f0f0f0;\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ${({ $ownMessage }) =>\n    $ownMessage &&\n    css`\n      background-color: #dcf8c6;\n    `}\n`;\n","import { useEffect, useState } from 'react';\n// import { Context } from 'index';\n// import { useAuthState } from 'react-firebase-hooks/auth';\n// import { useCollectionData } from 'react-firebase-hooks/firestore';\n// import { serverTimestamp, doc, setDoc } from 'firebase/firestore';\nimport {\n  // doc,\n  // setDoc,\n  addDoc,\n  // getDoc,\n  orderBy,\n  query,\n  getFirestore,\n  onSnapshot,\n  serverTimestamp,\n  collection,\n} from 'firebase/firestore';\nimport { app, auth } from '../../FirebaseConfig';\n\nimport * as s from './Chat.styled';\nimport Button from 'components/Button';\n// import { onAuthStateChanged } from 'firebase/auth';\n\nconst db = getFirestore(app);\n\nconst Chat = () => {\n  const user = auth.currentUser;\n  // const { auth, firestore } = useContext(Context);\n  console.log(user);\n  // const [user] = useAuthState(auth);\n  // const [messages, loading] = useCollectionData(\n  //   firestore.collection('messages').orderBy('createdAt')\n  // );\n\n  // const [inputValue, setInputValue] = useState('');\n  // const [user, setUser] = useState(null);\n  // console.log(user);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  // console.log(firestore);\n\n  // const sentMessage = async () => {\n  //   await addDoc(doc(db, 'messages'), {\n  //     uid: user.uid,\n  //     photoURL: user.photoURL,\n  //     displayName: user.displayName,\n  //     text: setNewMessages,\n  //     timestamp: serverTimestamp(),\n  //   });\n  //   setNewMessages('');\n  // };\n\n  const sendMessage = async () => {\n    await addDoc(collection(db, 'messages'), {\n      uid: user.uid,\n      photoURL: user.photoURL,\n      displayName: user.displayName,\n      text: newMessage,\n      timestamp: serverTimestamp(),\n    });\n\n    setNewMessage('');\n  };\n\n  useEffect(() => {\n    const q = query(collection(db, 'messages'), orderBy('timestamp'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      setMessages(\n        snapshot.docs.map(doc => ({\n          id: doc.id,\n          data: doc.data(),\n        }))\n      );\n    });\n    return unsubscribe;\n  }, []);\n\n  // useEffect(() => {\n  //   onAuthStateChanged(auth, user => {\n  //     if (user) {\n  //       setUser(user);\n  //     } else {\n  //       setUser(null);\n  //     }\n  //   });\n  // });\n\n  useEffect(() => {\n    const q = query(collection(db, 'messages'), orderBy('timestamp'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      setMessages(\n        snapshot.docs.map(doc => ({\n          id: doc.id,\n          data: doc.data(),\n        }))\n      );\n    });\n    return unsubscribe;\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    sendMessage();\n  };\n\n  return (\n    <s.Container>\n      <s.Chat>\n        <div>\n          {messages.map(msg => (\n            <s.ChatMessage key={msg.id} $ownMessage={msg.data.uid === user.uid}>\n              <s.Message $ownMessage={msg.data.uid === user.uid}>\n                <img src={msg.data.photoURL} alt=\"avatar_of_user\" />\n                <p>{msg.data.displayName}</p>\n                {msg.data.text}\n              </s.Message>\n            </s.ChatMessage>\n          ))}\n        </div>\n      </s.Chat>\n      <s.Form onSubmit={handleSubmit}>\n        <s.Input\n          value={newMessage}\n          onChange={e => setNewMessage(e.target.value)}\n        />\n        <Button name=\"submit\" />\n      </s.Form>\n    </s.Container>\n  );\n};\n\nexport default Chat;\n"],"names":["Button","styled","button","_templateObject","_taggedTemplateLiteral","_ref","func","name","type","_jsx","s","onClick","children","Container","div","Chat","_templateObject2","Form","form","_templateObject3","Input","input","_templateObject4","ChatMessage","_templateObject5","$ownMessage","Message","_templateObject6","_ref2","css","_templateObject7","db","getFirestore","app","user","auth","currentUser","console","log","messages","setMessages","useState","newMessage","setNewMessage","useEffect","q","query","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","data","_jsxs","msg","uid","src","photoURL","alt","displayName","text","onSubmit","e","preventDefault","async","addDoc","timestamp","serverTimestamp","sendMessage","value","onChange","target"],"sourceRoot":""}