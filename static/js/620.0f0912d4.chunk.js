"use strict";(self.webpackChunkmessenger_app=self.webpackChunkmessenger_app||[]).push([[620],{620:(n,e,t)=>{t.r(e),t.d(e,{default:()=>V});var i,a,o,r,s,d,l,c,p,u,x,h,m,g,f,A,y,j=t(43),v=t(32),b=t(88),w=t(712),k=t(156),S=t(147),C=t(764),I=t(528),M=t(197);const R=M.Ay.div(i||(i=(0,I.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  // padding: 15px 0;\n  width: 100%;\n"]))),_=M.Ay.div(a||(a=(0,I.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n"]))),E=M.Ay.form(o||(o=(0,I.A)(["\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  width: 500px;\n"]))),z=M.Ay.input(r||(r=(0,I.A)(["\n  width: 100%;\n  height: auto;\n  padding: 10px;\n"]))),D=M.Ay.div(s||(s=(0,I.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),N=M.Ay.div(d||(d=(0,I.A)(["\n  background-color: #f0f0f0;\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),(n=>{let{$ownMessage:e}=n;return e&&(0,M.AH)(l||(l=(0,I.A)(["\n      background-color: #dcf8c6;\n    "])))})),U=M.Ay.div(c||(c=(0,I.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),$=M.Ay.img(p||(p=(0,I.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),L=M.Ay.h2(u||(u=(0,I.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),F=M.Ay.p(x||(x=(0,I.A)(["\n  font-size: 14px;\n"]))),G=(M.Ay.input(h||(h=(0,I.A)(["\n  background: inherit;\n  border: none;\n  cursor: pointer;\n  width: 30px;\n  height: auto;\n"]))),M.Ay.label(m||(m=(0,I.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"])))),H=M.Ay.input(g||(g=(0,I.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),J=M.Ay.div(f||(f=(0,I.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  flex-direction: column;\n"]))),T=M.Ay.div(A||(A=(0,I.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"]))),q=M.Ay.img(y||(y=(0,I.A)(["\n  width: 150px;\n  height: 150px;\n  // border-radius: 50%;\n"])));var K=t(864),O=t(348),P=t(264),Q=t(579);const V=()=>{const[n,e]=(0,j.useState)(null),t=(0,j.useRef)(null),[i,a]=(0,j.useState)(""),[o,r]=(0,j.useState)(""),[s,d]=(0,j.useState)(!1),[l,c]=(0,j.useState)([]),[p,u]=(0,j.useState)(""),[x,h]=(0,j.useState)(null),[m,g]=(0,j.useState)("");console.log(m),(0,j.useEffect)((()=>{const n=localStorage.getItem("room");n&&a(n)}),[]),(0,j.useEffect)((()=>{(0,C.hg)(b.j2,(n=>{if(n){e(n);const t=localStorage.getItem("room");a(t)}else e(null),localStorage.removeItem("room"),a("")}))}),[]);(0,j.useEffect)((()=>{const n=(0,v.P)((0,v.rJ)(b.db,"messages"),(0,v._M)("room","==",i),(0,v.My)("timestamp"));return(0,v.aQ)(n,(n=>{c(n.docs.map((n=>({id:n.id,data:n.data()})))),f()}))}),[i]);const f=()=>{var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})},A=()=>{if(null==x)return;const n=(0,S.KR)(b.IG,"images/room/".concat(i,"/").concat(x.name+(0,w.Ak)()));(0,S.D)(n,x).then((n=>{console.log("Uploaded!"),(0,S.qk)(n.ref).then((n=>g(n))),h(null)}))};return(0,Q.jsx)(O.A,{children:(0,Q.jsx)(P.A,{children:i?(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsxs)(R,{children:[(0,Q.jsxs)(T,{children:[(0,Q.jsx)(K.A,{name:s?"Copied!":"Click here to copy invitation",type:"button",func:async()=>{await navigator.clipboard.writeText(i),d(!0)}}),(0,Q.jsx)(K.A,{func:()=>{localStorage.removeItem("room"),a("")},name:"Return",type:"button"})]}),(0,Q.jsx)(_,{children:(0,Q.jsx)("div",{children:l.map((e=>(0,Q.jsx)(D,{$ownMessage:e.data.uid===n.uid,children:(0,Q.jsxs)(N,{$ownMessage:e.data.uid===n.uid,ref:t,children:[(0,Q.jsxs)(U,{children:[(0,Q.jsx)($,{src:e.data.photoURL,alt:"avatar_of_user"}),(0,Q.jsx)(L,{children:e.data.displayName})]}),(0,Q.jsx)(F,{children:e.data.text}),(0,Q.jsx)(q,{src:e.data.file,alt:"document_img"})]})},e.id)))})}),(0,Q.jsxs)(E,{onSubmit:e=>{e.preventDefault(),A(),(async()=>{await(0,v.gS)((0,v.rJ)(b.db,"messages"),{uid:n.uid,photoURL:n.photoURL,displayName:n.displayName,text:p,timestamp:(0,v.O5)(),room:i,file:m}),u("")})()},children:[(0,Q.jsx)(H,{type:"file",id:"paperclip",onChange:n=>h(n.target.files[0])}),(0,Q.jsx)(G,{htmlFor:"paperclip",children:(0,Q.jsx)(k.EHs,{})}),(0,Q.jsx)(z,{value:p,onChange:n=>u(n.target.value),placeholder:"Insert your message here..."}),(0,Q.jsx)(K.A,{name:"SENT",type:"submit"})]})]})}):(0,Q.jsxs)(J,{children:[(0,Q.jsx)("p",{children:"Do you want create new room ?"}),(0,Q.jsx)(K.A,{func:()=>{const n=(0,w.Ak)();a(n),localStorage.setItem("room",n)},name:"Create room"}),(0,Q.jsx)("p",{children:"Click here or you have invitation?"}),(0,Q.jsxs)(E,{onClick:n=>{n.preventDefault(),localStorage.setItem("room",o),a(o)},children:[(0,Q.jsx)(z,{type:"text",value:o,onChange:n=>r(n.target.value),placeholder:"Insert your invitation here..."}),(0,Q.jsx)(K.A,{name:"Go to Room",type:"submit"})]})]})})})}},264:(n,e,t)=>{t.d(e,{A:()=>l});var i,a=t(528),o=t(197),r=t(880);const s=o.Ay.div(i||(i=(0,a.A)(["\n  padding: 0 72px;\n  margin: 0 auto;\n  min-width: ",";\n  max-width: ",";\n\n  @media screen and (min-width: ",") {\n    padding: 0 88px;\n    min-width: 768px;\n  }\n  @media screen and (min-width: ",") {\n    padding: 0 124px;\n    max-width: 1280px;\n  }\n"])),r.f.breakpoints.mobileMin,r.f.breakpoints.mobileMax,r.f.breakpoints.tablet,r.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},348:(n,e,t)=>{t.d(e,{A:()=>l});var i,a=t(528),o=t(197),r=t(880);const s=o.Ay.section(i||(i=(0,a.A)(["\n  padding: 60px 0;\n\n  @media screen and (min-width: ",") {\n    padding: 80px 0;\n  }\n  @media screen and (min-width: ",") {\n    padding: 90px 0;\n  }\n"])),r.f.breakpoints.tablet,r.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}}}]);
//# sourceMappingURL=620.0f0912d4.chunk.js.map