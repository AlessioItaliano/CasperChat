"use strict";(self.webpackChunkmessenger_app=self.webpackChunkmessenger_app||[]).push([[215],{1492:(n,e,t)=>{t.d(e,{A:()=>l});var o,a=t(7528),r=t(197),i=t(3255);const s=r.Ay.div(o||(o=(0,a.A)(["\n  padding: 0 72px;\n  margin: 0 auto;\n  min-width: ",";\n  max-width: ",";\n\n  @media screen and (min-width: ",") {\n    padding: 0 88px;\n    min-width: 768px;\n  }\n  @media screen and (min-width: ",") {\n    padding: 0 81px;\n    max-width: 1440px;\n  }\n"])),i.f.breakpoints.mobileMin,i.f.breakpoints.mobileMax,i.f.breakpoints.tablet,i.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},8774:(n,e,t)=>{t.d(e,{A:()=>l});var o,a=t(7528),r=t(197),i=t(3255);const s=r.Ay.section(o||(o=(0,a.A)(["\n  padding: 30px 0;\n\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n  @media screen and (min-width: ",") {\n    padding: 30px 0;\n  }\n"])),i.f.breakpoints.tablet,i.f.breakpoints.desktop);var d=t(579);const l=n=>{let{children:e}=n;return(0,d.jsx)(s,{children:e})}},3215:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Hn});var o,a,r=t(5043),i=t(6032),s=t(8147),d=t(764),l=t(1088),c=t(3013),m=t(3712),p=t(4117),u=t(8774),x=t(1492),g=t(4583),f=t(7528),h=t(197);const b=h.Ay.form(o||(o=(0,f.A)(["\n  position: relative;\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  justify-content: center;\n  width: ",";\n"])),(n=>n.$formSize)),y=h.Ay.input(a||(a=(0,f.A)(["\n  height: auto;\n  padding: ",";\n  border-radius: 12px;\n  border: none;\n  width: 100%;\n"])),(n=>n.$paddingLeft?"15px 15px 15px ".concat(n.$paddingLeft):"15px"));var A=t(579);const j=n=>{let{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:a,btnName:r,btnDisabled:i,formSize:s,children:d,paddingLeft:l}=n;return(0,A.jsxs)(b,{onSubmit:e,$formSize:s,children:[(0,A.jsx)(y,{value:t,onChange:o,placeholder:a,$paddingLeft:l}),d,(0,A.jsx)(g.A,{name:r,type:"submit",disabled:i})]})};var v=t(9637);const w=n=>{let{options:e,selectedRoom:t,selectPlaceholder:o,onSelectRoom:a}=n;return(0,A.jsx)(v.Ay,{options:e,value:t,onChange:a,placeholder:o,styles:{control:n=>({...n,height:"auto",padding:"7px 15px",borderRadius:"12px",border:"none",width:"291px"}),valueContainer:n=>({...n,padding:"0",margin:"0"}),indicatorsContainer:n=>({...n,padding:"0",margin:"0"}),input:n=>({...n,padding:"0",margin:"0"})}})};var S,k,R=t(3255);const C=h.Ay.div(S||(S=(0,f.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  gap: 30px;\n\n  // padding: 48px;\n  height: 80vh;\n  // background-color: ",";\n  background-color: inherit;\n  border-radius: 12px;\n"])),R.f.background.bgTertiary),M=h.Ay.p(k||(k=(0,f.A)(["\n  color: ",";\n\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 700;\n  line-height: 1.62em;\n  text-transform: uppercase;\n"])),R.f.colors.secondaryText),N=n=>{let{setRoom:e,user:t}=n;const[o,a]=(0,r.useState)(""),[s,d]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),{t:f}=(0,p.Bd)();(0,r.useEffect)((()=>{const n=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i.My)("timestamp"));return(0,i.aQ)(n,(n=>{const e=n.docs.filter((n=>n.data().uid===t.uid)),o={},a=e.reduce(((n,e)=>{const t=e.data().room;return o[t]||(o[t]=!0,n.push({value:t,label:"Room ".concat(n.length+1)})),n}),[]);d(a)}))}),[t]);const h=async n=>{try{const e=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i._M)("room","==",n));return!(await(0,i.GG)(e)).empty}catch(e){return console.error("Error checking room existence:",e),!1}};return(0,A.jsxs)(C,{children:[(0,A.jsx)(M,{children:f("createRoomTitle")}),(0,A.jsx)(g.A,{func:()=>{const n=(0,m.Ak)();e(n),localStorage.setItem("room",n),c.Notify.success("Room has been created!")},name:f("button.createRoom"),type:"button",size:"291px"}),(0,A.jsxs)(M,{children:["---------- ",f("or")," ---------"]}),(0,A.jsx)(M,{children:f("selectRoomTitle")}),(0,A.jsx)(w,{options:s,selectedRoom:u,onSelectRoom:n=>{x(n.value),localStorage.setItem("room",n.value),e(n.value),c.Notify.success("Welcome back!")},selectPlaceholder:f("selectFormPlaceholder")}),(0,A.jsxs)(M,{children:["---------- ",f("or")," ---------"]}),(0,A.jsx)(M,{children:f("joinRoomTitle")}),(0,A.jsx)(j,{onSubmit:async n=>{n.preventDefault();await h(o)?(localStorage.setItem("room",o),e(o),c.Notify.success("Welcome aboard!")):c.Notify.failure("Room does not exist. Please enter a valid room number.")},inputValue:o,onFormChange:n=>a(n.target.value),formPlaceholder:f("joinFormPlaceholder"),btnName:f("button.join"),formSize:"291px"})]})};var z=t(3528);const E=n=>{if(!n)return"";const e=n.toDate();return new Intl.DateTimeFormat("uk-UK",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)};var P,I,L,F,D,$,T,V,_,B;const G=h.Ay.div(P||(P=(0,f.A)(["\n  display: flex;\n  // flex-direction: column;\n  // gap: 10px;\n  // max-width: calc(100% / 1.5);\n  // width: fit-content;\n\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),J=h.Ay.div(I||(I=(0,f.A)(["\n  display: flex;\n  flex-direction: column;\n  // max-width: calc(100% / 2);\n  gap: 10px;\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n  max-width: calc(100% / 1.5);\n  width: fit-content;\n\n  ","\n"])),R.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(L||(L=(0,f.A)(["\n      background-color: ",";\n    "])),R.f.colors.secondaryMsm)})),H=h.Ay.div(F||(F=(0,f.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),K=(h.Ay.img(D||(D=(0,f.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2($||($=(0,f.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"])))),Q=h.Ay.p(T||(T=(0,f.A)(["\n  font-size: 18px;\n  word-wrap: break-word;\n"]))),U=h.Ay.img(V||(V=(0,f.A)(["\nwidth:100%\n  // width: 250px;\n  height: auto;\n"]))),W=h.Ay.div(_||(_=(0,f.A)(["\n  display: flex;\n  justify-content: right;\n"]))),q=h.Ay.p(B||(B=(0,f.A)(["\n  font-size: 14px;\n"]))),O=n=>{let{message:e,user:t,onModal:o,messagesEndRef:a}=n;return(0,A.jsx)(G,{$ownMessage:e.data.uid===t.uid,children:(0,A.jsxs)(J,{$ownMessage:e.data.uid===t.uid,ref:a,children:[(0,A.jsxs)(H,{children:[(0,A.jsx)(z.A,{user:e.data}),(0,A.jsx)(K,{children:e.data.displayName})]}),(0,A.jsx)(Q,{children:e.data.text}),U&&e.data.file&&(0,A.jsx)(U,{src:e.data.file,alt:"document_img",onClick:()=>o(e.data.file)}),(0,A.jsx)(W,{children:(0,A.jsx)(q,{children:E(e.data.timestamp)})})]})})};var X,Y,Z,nn,en,tn,on,an,rn;const sn=h.Ay.div(X||(X=(0,f.A)(["\n  width: 500px;\n  height: 60vh;\n  background-color: lightgrey;\n  border: 1px solid black;\n  overflow-y: auto;\n  padding: 10px;\n\n  border: 0.5px solid;\n  border-radius: 12px;\n\n  background-color: ",";\n"])),R.f.background.bgSecondary),dn=(h.Ay.div(Y||(Y=(0,f.A)(["\n  display: flex;\n  justify-content: ",";\n"])),(n=>{let{$ownMessage:e}=n;return e?"flex-end":"flex-start"})),h.Ay.div(Z||(Z=(0,f.A)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: 8px;\n  margin: 5px;\n\n  ","\n"])),R.f.colors.primaryMsm,(n=>{let{$ownMessage:e}=n;return e&&(0,h.AH)(nn||(nn=(0,f.A)(["\n      background-color: ",";\n    "])),R.f.colors.secondaryMsm)})),h.Ay.div(en||(en=(0,f.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),h.Ay.img(tn||(tn=(0,f.A)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n"]))),h.Ay.h2(on||(on=(0,f.A)(["\n  font-size: 16px;\n  font-weight: 600;\n"]))),h.Ay.p(an||(an=(0,f.A)(["\n  font-size: 14px;\n"]))),h.Ay.img(rn||(rn=(0,f.A)(["\n  width: 250px;\n  height: auto;\n"]))),n=>{let{messages:e,user:t,messagesEndRef:o,onModal:a}=n;return(0,A.jsx)(sn,{children:e.map((n=>(0,A.jsx)(O,{message:n,user:t,messagesEndRef:o,onModal:a},n.id)))})});var ln,cn,mn;const pn=h.Ay.div(ln||(ln=(0,f.A)(["\n  position: absolute;\n  left: 10px;\n"]))),un=h.Ay.label(cn||(cn=(0,f.A)(["\n  font-size: 16px;\n  font-weight: 500;\n  color: black;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),xn=h.Ay.input(mn||(mn=(0,f.A)(["\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"])));var gn=t(3156);const fn=n=>{let{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:a,btnName:r,btnDisabled:i,formSize:s,onAddIcon:d,paddingLeft:l}=n;return(0,A.jsx)(j,{onSubmit:e,formValue:t,onFormChange:o,formPlaceholder:a,btnName:r,btnDisabled:i,formSize:s,paddingLeft:l,children:(0,A.jsxs)(pn,{children:[(0,A.jsx)(xn,{type:"file",accept:"image/*",id:"paperclip",onChange:d}),(0,A.jsx)(un,{htmlFor:"paperclip",children:(0,A.jsx)(gn.EHs,{})})]})})};var hn;const bn=h.Ay.div(hn||(hn=(0,f.A)(["\n  display: flex;\n  align-item: center;\n  justify-item: center;\n  gap: 10px;\n"]))),yn=n=>{let{room:e,setRoom:t}=n;const[o,a]=(0,r.useState)(!1),{t:i}=(0,p.Bd)();return(0,A.jsxs)(bn,{children:[(0,A.jsx)(g.A,{name:i(o?"chatCopied":"chatCopiedClicked"),type:"button",func:async()=>{await navigator.clipboard.writeText(e),c.Notify.success("Invitation is copied!"),a(!0)}}),(0,A.jsx)(g.A,{func:()=>{localStorage.removeItem("room"),t("")},name:i("button.return"),type:"button"})]})};var An;const jn=h.Ay.div(An||(An=(0,f.A)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  width: 100%;\n"]))),vn=n=>{let{room:e,setRoom:t,messages:o,user:a,messagesEndRef:r,onModal:i,onSubmit:s,formValue:d,onFormChange:l,formPlaceholder:c,btnName:m,btnDisabled:p,formSize:u,onAddIcon:x,paddingLeft:g}=n;return(0,A.jsxs)(jn,{children:[(0,A.jsx)(yn,{room:e,setRoom:t}),(0,A.jsx)(dn,{messages:o,user:a,messagesEndRef:r,onModal:i}),(0,A.jsx)(fn,{onSubmit:s,formValue:d,onFormChange:l,formPlaceholder:c,btnName:m,btnDisabled:p,formSize:u,onAddIcon:x,paddingLeft:g})]})};var wn,Sn,kn,Rn=t(7950);const Cn=h.Ay.div(wn||(wn=(0,f.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n\n  background-color: transparent;\n"]))),Mn=h.Ay.div(Sn||(Sn=(0,f.A)(["\n  position: relative;\n\n  width: calc(100% - 30px);\n  max-width: 541px;\n  height: auto;\n  max-height: calc(100vh - 30px);\n\n  padding: 40px 20px 20px 20px;\n  overflow-y: auto;\n\n  border-radius: 12px;\n\n  background-color: ",";\n"])),R.f.background.bgSecondary),Nn=h.Ay.button(kn||(kn=(0,f.A)(["\n  position: absolute;\n  font-size: 24px;\n  top: 16px;\n  right: 16px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  padding: 0;\n\n  cursor: pointer;\n  border: none;\n\n  background-color: transparent;\n"])));var zn=t(423);const En=document.getElementById("modal-root"),Pn=n=>{let{onClose:e,children:t}=n;(0,r.useEffect)((()=>{const n=n=>{"Escape"===n.code&&e()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[e]);return(0,Rn.createPortal)((0,A.jsx)(Cn,{onClick:n=>{n.currentTarget===n.target&&e()},children:(0,A.jsxs)(Mn,{children:[(0,A.jsx)(Nn,{onClick:e,children:(0,A.jsx)(zn.WQq,{})}),t]})}),En)};var In;const Ln=h.Ay.img(In||(In=(0,f.A)(["\n  width: 500px;\n  height: auto;\n"]))),Fn=n=>{let{onClose:e,picture:t}=n;return(0,A.jsx)(Pn,{onClose:e,children:(0,A.jsx)(Ln,{src:t,alt:"preLoad_img"})})};var Dn,$n,Tn;const Vn=h.Ay.div(Dn||(Dn=(0,f.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n"]))),_n=h.Ay.img($n||($n=(0,f.A)(["\n  width: 500px;\n  height: auto;\n"]))),Bn=h.Ay.div(Tn||(Tn=(0,f.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Gn=n=>{let{onClose:e,picture:t,btnRemoveName:o,btnSentName:a,onSubmit:r}=n;return(0,A.jsx)(Pn,{onClose:e,children:(0,A.jsxs)(Vn,{children:[(0,A.jsx)(_n,{src:t,alt:"preLoad_img"}),(0,A.jsxs)(Bn,{children:[(0,A.jsx)(g.A,{type:"button",name:o,func:e,btnType:"remove"}),(0,A.jsx)(g.A,{type:"button",name:a,func:r})]})]})})};var Jn=t(2298);const Hn=()=>{const n=(0,r.useRef)(null),{t:e}=(0,p.Bd)(),[t,o]=(0,r.useState)(null),[a,g]=(0,r.useState)(""),[f,h]=(0,r.useState)([]),[b,y]=(0,r.useState)(""),[j,v]=(0,r.useState)(null),[w,S]=(0,r.useState)(""),[k,R]=(0,r.useState)(!1),[C,M]=(0,r.useState)(!1),[z,E]=(0,r.useState)(""),[P,I]=(0,r.useState)(!1),[L,F]=(0,r.useState)("");(0,r.useEffect)((()=>{(0,d.hg)(l.j2,(n=>{if(n){o(n);const e=localStorage.getItem("room");g(e)}else o(null),localStorage.removeItem("room"),g("")}))}),[]),(0,r.useEffect)((()=>{const n=(0,i.P)((0,i.rJ)(l.db,"messages"),(0,i._M)("room","==",a),(0,i.My)("timestamp")),e=(0,i.aQ)(n,(n=>{h(n.docs.map((n=>({id:n.id,data:n.data()}))))}));return $(),e}),[a]),(0,r.useEffect)((()=>{j&&V()}),[j]);const D=async n=>{n.preventDefault(),""===b.trim()&&""===w||(await V(),(async()=>{await(0,i.gS)((0,i.rJ)(l.db,"messages"),{uid:t.uid,photoURL:t.photoURL,displayName:t.displayName,text:b,timestamp:(0,i.O5)(),room:a,file:w}),y("")})(),R(!1),y(""),v(null),S(""))};(0,r.useEffect)((()=>{$()}),[f]);const $=()=>{var e;null===(e=n.current)||void 0===e||e.scrollIntoView({block:"end",inline:"end"})},T=n=>{F(n),I((n=>!n))},V=async()=>{if(null==j)return;R(!0),M(!0);const n=j.name+(0,m.Ak)();E(n);const e=(0,s.KR)(l.IG,"images/room/".concat(a,"/").concat(n));await(0,s.D)(e,j).then((n=>{(0,s.qk)(n.ref).then((n=>{S(n),M(!1)}))})).catch((n=>{c.Notify.failure("Error uploading file"),M(!1)})),v(null)};return(0,A.jsxs)(u.A,{children:[(0,A.jsx)(x.A,{children:a?(0,A.jsx)(vn,{room:a,setRoom:g,messages:f,user:t,messagesEndRef:n,onModal:T,onSubmit:D,formValue:b,onFormChange:n=>y(n.target.value),formPlaceholder:e("messageFormPlaceholder"),btnName:e("button.sent"),btnDisabled:null!==j,formSize:"500px",onAddIcon:n=>v(n.target.files[0]),paddingLeft:"35px"}):(0,A.jsx)(N,{setRoom:n=>{g(n)},user:t})}),k?C?(0,A.jsx)(Jn.A,{}):(0,A.jsx)(Gn,{onClose:()=>{R(!1),v(null),S(""),(0,s.XR)((0,s.KR)(l.IG,"images/room/".concat(a,"/").concat(z)))},picture:w,btnRemoveName:e("button.delete"),btnSentName:e("button.sent"),onSubmit:D}):null,P&&(0,A.jsx)(Fn,{onClose:T,picture:L})]})}}}]);
//# sourceMappingURL=215.241ab9ee.chunk.js.map